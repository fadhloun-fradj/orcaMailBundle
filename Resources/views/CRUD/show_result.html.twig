{% extends 'SonataAdminBundle::standard_layout.html.twig' %}

{% block sonata_admin_content %}
    <div class="box box-primary">
        <div class="box-body table-responsive no-padding" style="margin-left: 10px;">

            <strong>SQL :</strong> <p class="minimize">{{ sql }}</p>
            <strong>Nombre :</strong> {{ result|length }} <br>
            <strong>Resultat de la requette :</strong> <br>
            <table class="table table-bordered table-striped sonata-ba-list">
                {% for item in result %}
                    <tr>
                        <td>{{ item.user_id }}</td>
                        <td>{{ item.destinataire }}</td>
                        <td>{{ item.nom_client }}</td>
                        <td>{{ item.prenom_client }}</td>
                        <td>{{ item.marque }}</td>
                        <td>{{ item.modele }}</td>
                        <td>{{ item.type_financement }}</td>
                        <td>{{ item.date_simulation }}</td>
                        <td>{{ item.simulationId }}</td>
                        <td>{{ item.apporteur }}</td>
                        <td>{{ item.user_nom }}</td>
                        <td>{{ item.user_prenom }}</td>
                        <td>{{ item.user_tel }}</td>
                        <td>{{ item.user_mail }}</td>
                        <td>{{ item.user_mail }}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
        <div class="box-footer">
            <a href="{{ path('admin_orca_mail_mailtblvue_list') }}" class="btn btn-default"><i class="fa fa-rotate-left"></i> Retour Ã  la liste</a>
        </div>
    </div>



    <script>
        jQuery(function(){

            var minimized_elements = $('p.minimize');

            minimized_elements.each(function(){
                var t = $(this).text();
                if(t.length < 100) return;

                $(this).html(
                        t.slice(0,100)+'<span>... </span><a href="#" class="more">Voir plus</a>'+
                        '<span style="display:none;">'+ t.slice(100,t.length)+' <a href="#" class="less">Voir moin</a></span>'
                );

            });

            $('a.more', minimized_elements).click(function(event){
                event.preventDefault();
                $(this).hide().prev().hide();
                $(this).next().show();
            });

            $('a.less', minimized_elements).click(function(event){
                event.preventDefault();
                $(this).parent().hide().prev().show().prev().show();
            });

        });
    </script>
{% endblock %}